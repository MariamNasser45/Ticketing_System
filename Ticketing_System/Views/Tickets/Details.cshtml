@model Ticketing_System.Models.Ticket
@inject UserManager<IdentityUser> UserManager
@using Microsoft.AspNetCore.Identity;

@{
    ViewData["Title"] = "Ticket Details";
}

<h1 style="text-align:center">Ticket Details</h1>

<div>
    <hr />
    <dl class="row" style="background-color:black; text-align:justify; font-weight:bold; font-size:large;color:white">
        <dt class="col-sm-3">
            <label asp-for="TicketId"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.TicketId</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="CategoryId"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.category?.CategoryName</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="StatusId"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.status?.StatusName</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="SeverityId"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.severity?.SeverityName</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="IssueStartDate"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.IssueStartDate</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="SLInHours"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.SLInHours</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="Description"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.Description</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="CreatorId"></label>
        </dt>
        <dd class="col-sm-8">
            @{
                var user = await UserManager.FindByIdAsync(Model.CreatorId);
                }
            <p> @user?.UserName </p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="LastActionDateTime"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.LastActionDateTime</p>
        </dd>
        <dt class="col-sm-3">
            <label asp-for="LastUpdatedBy"></label>
        </dt>
        <dd class="col-sm-8">
            @{
                var user1 = await UserManager.FindByIdAsync(Model.LastUpdatedBy);
            }
            <p>@user1?.UserName</p>
        </dd>

        <dt class="col-sm-3">
            <label asp-for="SLEndDateTime"></label>
        </dt>
        <dd class="col-sm-8">
            <p>@Model.SLEndDateTime</p>
        </dd>
    </dl>
</div>
<div>

    <a asp-action="Edit" asp-route-id="@Model?.TicketId" class="btn btn-outline-warning">Edit</a>
    <a asp-action="Index" class="btn btn-outline-dark">Back to List</a>
</div>
